<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Área do Administrador</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <h1>Bem-vindo, Administrador!</h1>
    <p>Aqui você pode criar e gerenciar fichas de pacientes, além de enviar dicas personalizadas.</p>
    <a href="inicio.html">Sair</a>
    <script src="admin.js"></script>
    
    <!-- Botão Gerenciar Horários -->
    <a href="https://calendly.com/event_types" target="_blank">
        <button>
            Gerenciar Horários
        </button>
    </a>

    <!-- Botão Criar Ficha -->
    <div class="create-ficha-button">
        <a href="ficha.html" class="btn-criar-ficha">Criar Ficha de Anamnese</a>
    </div>
    
    <!-- Lista de Fichas Já Feitas -->
    <div class="fichas-lista">
        <h2>Fichas de Anamnese</h2>
        <ul>
            <li>
                <span>Ficha 1 - Paciente A</span>
                <a href="#">Ver</a>
            </li>
            <li>
                <span>Ficha 2 - Paciente B</span>
                <a href="#">Ver</a>
            </li>
            <li>
                <span>Ficha 3 - Paciente C</span>
                <a href="#">Ver</a>
            </li>
        </ul>
    </div>
    <!-- Dicas Personalizadas -->
    <div class="card">
        <h2>Criar Nova Dica</h2>
        <label for="titulo">Título da dica:</label>
        <input type="text" id="titulo" />
      
        <label for="descricao">Descrição:</label>
        <textarea id="descricao" rows="3"></textarea>
      
        <label for="paciente">Paciente (opcional):</label>
        <input type="text" id="paciente" placeholder="Deixe em branco para todos" />
      
        <button onclick="criarDica()">Criar Dica</button>
      </div>

      <script>
        function criarDica() {
          const titulo = document.getElementById('titulo').value.trim();
          const descricao = document.getElementById('descricao').value.trim();
        
          if (!titulo || !descricao) {
            alert("Preencha o título e a descrição.");
            return;
          }
        
          fetch("http://localhost:3000/dicas", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ titulo, descricao })
          })
            .then(res => res.text())
            .then(msg => {
              alert(msg);
              document.getElementById('titulo').value = '';
              document.getElementById('descricao').value = '';
            })
            .catch(err => {
              console.error(err);
              alert("Erro ao salvar a dica.");
            });
        }
        </script>
</body>
</html>
